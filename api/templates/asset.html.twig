{% extends "base.html.twig" %}

{% block title %}Asset{% endblock %}

{% block body %}

<div class="row">
	<div class="col-md-12">
	    <h2>{{ asset.kind.identifier }} - {{ asset.identifier }}</h2>
	</div>
</div>

<div class="row">
	<div class="col-md-12">
	    <h3>Attributes</h3>
	</div>
</div>

<div class="row">
	<div class="col-md-12">
	    
	    <table class="table">
	      <thead><tr><th>Attribute</th><th>Value</th></tr></thead>
	      <tbody id="instance-table">
	      	{% if asset.version %}
	      	<tr><td>Version</td><td>{{ asset.version.name }}</td></tr>
	      	{% endif %}
	      	{% for attribute, value in asset.attributes %}
	      		<tr>
	      			<td>{{ attribute }}</td>
	      			<td>{{ value }}</td>
	      		</tr>
	      	{% endfor %}
	      </tbody>
	    </table>
	</div>
</div>

<div class="row">
	<div class="col-md-12">
	    <h3>Labels</h3>
	</div>
</div>
<div class="row">
	<div class="col-md-12">
	    <table class="table">
	      <thead><tr><th>Label</th><th>Value</th></tr></thead>
	      <tbody id="instance-table">
	      	{% for label, value in asset.labels %}
	      		<tr>
	      			<td>{{ label }}</td>
	      			<td>{{ value }}</td>
	      		</tr>
	      	{% endfor %}
	      </tbody>
	    </table>
	</div>
</div>

<div class="row">
	<div class="col-md-12">
	    <h3>Instances</h3>
	</div>
</div>
<div class="row">
	<div class="col-md-12">
	    
	    <table class="table">
	      <thead><tr><th>ID</th><th>Identifier</th><th>Version</th><th>Conformity</th></tr></thead>
	      <tbody id="instance-table">
	      	{% for instance in asset.instances %}
	      		<tr>
	      			<td>{{ instance.id }}</td>
	      			<td>{{ instance.identifier }}</td>
	      			<td>{{ instance.version }}</td>
	      			<td class="renderBool">{{ instance.conformity }}</td>
	      		</tr>
	      	{% endfor %}
	      </tbody>
	    </table>
	</div>
</div>

<div class="row">
	<div class="col-md-12">
	    <h3>Audits</h3>
	    <table class="table">
	      <thead><tr><th>Datetime</th><th>Actor</th><th>Action</th><th>Data</th></tr></thead>
	      <tbody id="audit-table">
	      	{% for audit in asset.assetAudits %}
	      		<tr>
	      			<td>{{ audit.datetime }}</td>
	      			<td>{{ audit.actor }}</td>
	      			<td>{{ audit.action }}</td>
	      			<td>{{ audit.data }}</td>
	      		</tr>
	      	{% endfor %}
	      </tbody>
	    </table>
	</div>
</div>

{% endblock %}

{% block js %}

<script>

$(document).ready(function () {
  $('.renderBool').each(function() {
  	let val = $(this).html();
  	$(this).html(renderBool(val === '1'));
  });
  
});

</script>

{% endblock %}